@startuml AdminSequenceDiagram

' Title
title Biểu đồ tuần tự cho chức năng Thêm mới Thực phẩm

' Participants
actor "Quản trị viên" as Admin
participant "FoodAdminController" as Controller
participant "FoodAdminService" as Service
participant "FoodRepository" as Repository
participant "AINlpTrainingService" as AIService
database "Cơ sở dữ liệu" as DB

' Flow
Admin -> Controller: POST /admin/foods (foodData)
activate Controller

Controller -> Service: createFood(foodData)
activate Service

Service -> Service: validate(foodData)

Service -> Repository: save(foodEntity)
activate Repository

Repository -> DB: INSERT INTO foods (...)
activate DB
DB --> Repository: persistedFoodEntity
deactivate DB

Repository --> Service: persistedFoodEntity
deactivate Repository

Service -> AIService: triggerRetraining(persistedFoodEntity)
activate AIService

AIService --> Service: void
deactivate AIService

Service --> Controller: foodDto
deactivate Service

Controller --> Admin: 201 Created (foodDto)
deactivate Controller

@enduml
