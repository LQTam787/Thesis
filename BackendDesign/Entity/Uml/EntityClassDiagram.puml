@startuml EntityClassDiagram

hide empty members

' Enum definitions
enum Gender {
  MALE
  FEMALE
  OTHER
}

enum GoalType {
  WEIGHT_LOSS
  WEIGHT_GAIN
  MUSCLE_GAIN
  MAINTAIN_WEIGHT
}

enum MealType {
  BREAKFAST
  LUNCH
  DINNER
  SNACK
}

enum ReportType {
  WEEKLY_PROGRESS
  NUTRITION_SUMMARY
}

enum SuggestionCategory {
  DIET_ADJUSTMENT
  ACTIVITY_INCREASE
}

' Entity Classes
class User {
  + id: Long
  + username: String
  + password: String
  + email: String
  + role: String
  --
  + profile: Profile
  + goals: List<Goal>
  + nutritionPlans: List<NutritionPlan>
  + foodLogs: List<FoodLog>
  + activityLogs: List<ActivityLog>
  + reports: List<Report>
  + suggestions: List<Suggestion>
}

class Profile {
  + id: Long
  + fullName: String
  + dateOfBirth: LocalDate
  + gender: Gender
  + height: Double
  + weight: Double
  + activityLevel: String
  + allergies: String
  + medicalConditions: String
  --
  + user: User
}

class Goal {
  + id: Long
  + targetWeight: Double
  + targetDate: LocalDate
  + goalType: GoalType
  + status: String
  --
  + user: User
}

class NutritionPlan {
  + id: Long
  + planName: String
  + startDate: LocalDate
  + endDate: LocalDate
  + nutritionGoal: String
  --
  + user: User
  + dailyMenus: List<DailyMenu>
}

class DailyMenu {
  + id: Long
  + date: LocalDate
  --
  + nutritionPlan: NutritionPlan
  + meals: List<Meal>
}

class Meal {
  + id: Long
  + mealType: MealType
  + time: LocalTime
  --
  + dailyMenu: DailyMenu
  + mealFoodItems: List<MealFoodItem>
}

class FoodItem {
  + id: Long
  + name: String
  + calories: Double
  + protein: Double
  + carbs: Double
  + fats: Double
  + servingSize: String
  --
  + recipe: Recipe
  + mealFoodItems: List<MealFoodItem>
  + foodLogs: List<FoodLog>
}

' Association class refactored
class MealFoodItem {
  + id: Long
  + quantity: Double
  + unit: String
  --
  + meal: Meal
  + foodItem: FoodItem
}

class Recipe {
  + id: Long
  + instructions: String
  + preparationTime: Integer 'in minutes'
  --
  + foodItem: FoodItem
}

class FoodLog {
  + id: Long
  + logDate: LocalDateTime
  + quantity: Double
  + unit: String
  --
  + user: User
  + foodItem: FoodItem
}

class Activity {
  + id: Long
  + name: String
  + caloriesBurnedPerHour: Double
  --
  + activityLogs: List<ActivityLog>
}

class ActivityLog {
  + id: Long
  + logDate: LocalDateTime
  + durationInMinutes: Integer
  + caloriesBurned: Double
  --
  + user: User
  + activity: Activity
}

class Report {
  + id: Long
  + reportType: ReportType
  + generatedDate: LocalDateTime
  + content: String
  --
  + user: User
}

class Suggestion {
  + id: Long
  + suggestionText: String
  + createdDate: LocalDateTime
  + category: SuggestionCategory
  --
  + user: User
}

' Relationships
User "1" -- "1" Profile
User "1" -- "*" Goal
User "1" -- "*" NutritionPlan
User "1" -- "*" Report
User "1" -- "*" Suggestion

NutritionPlan "1" *-- "*" DailyMenu
DailyMenu "1" *-- "*" Meal

' Refactored Meal-FoodItem relationship
Meal "1" *-- "*" MealFoodItem
MealFoodItem "*" -- "1" FoodItem

FoodItem "1" -- "1" Recipe

' Logging relationships
User "1" -- "*" FoodLog
FoodLog "*" -- "1" FoodItem

User "1" -- "*" ActivityLog
ActivityLog "*" -- "1" Activity

@enduml
