@startuml DeploymentDiagram
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Container.puml

title Deployment Diagram for AI Nutrition Guidance System

node "Client Device" as Client {
  component "Web Browser/Mobile App" as WebApp
}

node "Web Server (Nginx)" as WebServer {
  artifact "Frontend Artifacts" as Frontend
}

node "Application Server (Tomcat)" as AppServer {
    artifact "Backend Application (.jar)" as BackendApp {
        package "Spring Boot App" {
            component "API Gateway" as Gateway
            component "Business Logic" as BusinessLogic
            component "Data Access" as DataAccess
        }
    }
}

node "AI Server" as AIServer {
    artifact "AI Service" as AIService {
        package "Python AI/ML" {
            component "NLP Model" as NLP
            component "Vision Model" as Vision
            component "Recommendation Engine" as RecEngine
        }
    }
}

node "Database Server" as DBServer {
  database "MySQL Database" as DB
}

WebApp --> WebServer : "Requests static assets (HTML, JS, CSS)"
WebServer --> WebApp : "Serves frontend application"

WebApp --> Gateway : "Makes API calls (REST/JSON)"
Gateway --> BusinessLogic : "Forwards requests"
BusinessLogic --> DataAccess : "Accesses data"
DataAccess --> DB : "CRUD operations (JPA)"
BusinessLogic --> AIService : "Requests AI analysis (REST/gRPC)"

AIService --> NLP : "Processes text"
AIService --> Vision : "Processes images"
AIService --> RecEngine : "Generates recommendations"

@enduml
